# Дипломный проект профессии «Python-разработчик: расширенный курс»

## Backend-приложение для автоматизации закупок

### Цель дипломного проекта

Создадите и настроите проект по автоматизации закупок в розничной сети, проработаете модели данных, импорт товаров, API views.

Вам нужно:

* разработать backend для сервиса заказа товаров,
* усовершенствовать навыки работы с Django ORM через проработку моделей товаров и связанных сущностей,
* реализовать импорт и экспорт товаров,
* внедрить систему управления заказами,
* оптимизировать методы с использованием асинхронности,
* освоить работу со сторонними библиотеками и фреймворками,
* подготовить документацию к проекту,
* использовать AI инструменты для решения задач.

-----

## Чеклист готовности к работе над проектом

1. Изучить материалы лекции подготовки к дипломной работе.
2. Подготовить компьютер или виртуальную машину с ОС Linux или MacOS (не рекомендуем использовать Windows).
3. Установить IDE с поддержкой Python: Pycharm, VS Code или др.
4. Установить версию Python 3.10 или более позднюю.
5. Установить AI-плагин из списка:
- [Machinet](https://www.machinet.net/),
- [Codeium](https://codeium.com/),
- [Tabnine](https://www.tabnine.com/),
- [Amazon Сodewhisperer](https://aws.amazon.com/ru/codewhisperer/),
- [Mutable.AI](https://mutable.ai/pricing/),
- [Google Duet-AI](https://cloud.google.com/duet-ai/docs/developers/use-in-ide).

-----

## Инструкция к работе над проектом

### Общее описание приложения

Приложение предназначено для автоматизации закупок в розничной сети через REST API.

**Внимание! Все взаимодействие с приложением ведется через API запросы. 
Реализация фронтенд-приложения возможна только по желанию обучающегося**

**Пользователи сервиса:**

1. Клиент (покупатель):

- делает ежедневные закупки по каталогу, в котором представлены товары от нескольких поставщиков,
- в одном заказе можно указать товары от разных поставщиков,
- пользователь может авторизироваться, регистрироваться и восстанавливать пароль через API.
    
2. Поставщик:

- через API информирует сервис об обновлении прайса,
- может включать и отключать приём заказов,
- может получать список оформленных заказов (с товарами из его прайса).



## Структура файла views.py


### class RegisterAccount(APIView): 
    Класс для регистрации новых пользователей. 
    Позволяет создать учетную запись пользователя с проверкой сложности пароля и уникальности данных.

    Методы:
    **post(request, *args, kwargs):
        Обрабатывает POST-запрос для создания нового пользователя. Проверяет наличие всех необходимых полей и сохраняет пользователя в базе данных.

    Ожидаемые данные:
    first_name (str): Имя пользователя.
    last_name (str): Фамилия пользователя.
    email (str): Электронная почта пользователя.
    password (str): Пароль пользователя.
    company (str): Компания пользователя.
    position (str): Должность пользователя.

    Ответы:
        В случае успешного создания учетной записи возвращает HTTP-статус 201.

### ConfirmAccount (APIView):
    Класс для подтверждения почтового адреса пользователя после регистрации

    Методы:
    **post(request, *args, kwargs):
    Обрабатывает POST-запрос для подтверждения почтового адреса на основе отправленного токена. Если токен указан верно, учетная запись пользователя активируется.

    Ожидаемые данные:
        email (str): Электронная почта пользователя.
        token (str): Токен подтверждения, отправленный на почту.

    Ответы:
        В случае успешного подтверждения почтового адреса возвращает HTTP-статус 200.

### LoginAccount (APIView):
    Класс для авторизации пользователей. Позволяет аутентифицировать пользователя и вернуть токен для дальнейшей работы с API.
    При успешной авторизации токен отправляется пользователю на указанный email.

    Методы:
    post(request, *args, kwargs):
        Обрабатывает POST-запрос для аутентификации пользователя по email и паролю. В случае успешной аутентификации возвращает токен для доступа к API.

    Ожидаемые данные:
        email (str): Электронная почта пользователя.
        password (str): Пароль пользователя.

    Ответы:
    В случае успешной аутентификации возвращает HTTP-статус 200 и токен для доступа к API.

### ShopView (ListAPIView):
    Класс для просмотра списка магазинов. Отображает только активные магазины.

    Атрибуты:
        queryset:
        Запрос к базе данных, который получает все записи из модели Shop, где state=True (только активные магазины).

        serializer_class:
        Сериализатор, используемый для преобразования объектов магазина в формат JSON (ShopSerializer).

### CategoryView (ListAPIView):
    Класс для просмотра списка категорий.

    Атрибуты:
        queryset:
        Запрос к базе данных, который получает все записи из модели Category.

        serializer_class:
        Сериализатор, используемый для преобразования объектов категории в формат 
        JSON (CategorySerializer).

### ProductInfoView (APIView):
    Класс для поиска и отображения информации о продуктах. Поддерживает фильтрацию по магазинам и категориям.

    Методы:
    **get(request: Request, *args, kwargs):
    Возвращает информацию о продуктах на основе указанных фильтров (магазин и/или категория). Если фильтры не заданы, возвращаются все доступные продукты из активных магазинов.

    Параметры запроса:
    shop_id (int, optional): Идентификатор магазина для фильтрации продуктов.
    category_id (int, optional): Идентификатор категории для фильтрации продуктов.

    Ответ:
    200 OK:
    Список продуктов, соответствующих указанным фильтрам, в формате JSON.

    Атрибуты:
        query:
        Объект Q, который используется для создания динамических условий поиска.

        queryset:
        Запрос к базе данных, который получает информацию о продуктах, включая связанные модели (shop, product__category, product_parameters__parameter).

        serializer_class:
        Сериализатор, используемый для преобразования объектов ProductInfo в формат JSON (ProductInfoSerializer).


### BasketView (APIView):
    Класс для управления корзиной пользователя. Позволяет просматривать, добавлять, обновлять и удалять товары в корзине.

    Аутентификация: Все операции с корзиной требуют аутентификации.

    Методы:
    **get(request, *args, kwargs):
    Возвращает список товаров в корзине пользователя.

    **post(request, *args, kwargs):
    Добавляет товары в корзину пользователя.

        Ожидаемые данные:
        items (list): Список товаров, которые необходимо добавить в корзину.
        Каждый элемент должен содержать product_info (ID продукта) и quantity 
        (количество).
        Пример: 
            Authorization: Token {auth_token}: Токен авторизации пользователя.
            Content-Type: application/json: Тип контента запроса.
            body: 
            {
            "items": [
                {"product_info": 4, "quantity": 4}
                    ]
            }

    **put(request, *args, kwargs):
    Обновляет количество товаров в корзине пользователя.

        Ожидаемые данные:
        items (str): JSON-строка с информацией о товарах и их количестве для обновления.

    **delete(request, *args, kwargs):
    Удаляет товары из корзины пользователя.

        Ожидаемые данные:
        items (str): Строка с перечислением ID товаров, которые нужно удалить, через запятую.


### PartnerUpdate (APIView)
    Класс для обновления информации о партнерах (магазинах) и их продуктах. Партнеры могут загружать данные о своем магазине и продуктах через YAML-файл.

    Аутентификация и авторизация: Пользователь должен быть аутентифицирован и иметь тип "shop". Если пользователь не аутентифицирован или его тип не "shop", операция будет отклонена.

    Валидация URL:
    Перед запросом URL проходит валидацию. Если URL некорректен, возвращается ошибка.

    Методы:
    **post(request, *args, kwargs):
    Обрабатывает POST-запрос для обновления информации о магазине и его продуктах. Данные берутся из YAML-файла, URL которого передается в теле запроса.

    Ожидаемые данные:
        url (str): URL-адрес YAML-файла, содержащего информацию о магазине, категориях и продуктах. 
        пример структуры файла:
        url: https://raw.githubusercontent.com/netology-code/pd-diplom/master/data/shop1.yaml
     
    Заголовки запроса:
    Authorization: Token {auth_token}: Токен авторизации пользователя.
    Content-Type: application/json: Тип контента запроса.
    Ожидаемые данные:


